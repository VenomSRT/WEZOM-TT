{"version":3,"sources":["scripts/main.js"],"names":["cardsContainerHtml","document","querySelector","innerHTML","categoryFormsHtml","priceValidatior","addToComparison","addToFavourite","menuDisplay","toggleMenu","style","display","emailValidator","event","regExp","emailInput","target","test","String","value","backgroundColor","setAttribute","passwordValidator","passwordInput","querySelectorAll","forEach","input","addEventListener","isNaN","tagName","elemClass","className","elem","getElementById","split","transform","preventDefault","inputField","match","placeholder","replace","key","resetFormButtons","link","counterLabel","textContent","favouriteLabel","button","cardsContainer","trim","length","setTimeout","RegExp","allMatches","matchAll","sortedWords","foundedMatch","includes","push","word","wordRegExp","getAttribute","subscriptionPopup","left","opacity"],"mappings":"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","file":"main.de44bde0.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet cardsContainerHtml = document.querySelector('#cards-container').innerHTML;\nconst categoryFormsHtml = document\n  .querySelector('.goods-filter__category').innerHTML;\n\npriceValidatior();\naddToComparison();\naddToFavourite();\n\nlet menuDisplay = 'none';\n\nfunction toggleMenu() {\n  if (menuDisplay === 'none') {\n    document.querySelector('.header__menu').style.display = 'block';\n    menuDisplay = 'block';\n  } else {\n    document.querySelector('.header__menu').style.display = 'none';\n    menuDisplay = 'none';\n  }\n}\n\ndocument.querySelector('.header__menu-button')\n  .addEventListener('click', toggleMenu);\n\ndocument.querySelector('.labels-container')\n  .addEventListener('click', (event) => {\n    if (event.target.tagName === 'INPUT') {\n      const elemClass = event.target.className;\n\n      document.querySelectorAll('.goods-filter__form')\n        .forEach(elem => {\n          elem.style.display = 'none';\n        });\n\n      document.getElementById(elemClass.split('--')[1]).style.display = 'flex';\n    }\n  });\n\ndocument.querySelector('.header__enter-button')\n  .addEventListener('click', () => {\n    document.querySelector('.enter-popup').style.transform = 'translate(0, 0)';\n  });\n\ndocument.querySelector('.enter-popup__cross-container')\n  .addEventListener('click', () => {\n    document.querySelector('.enter-popup')\n      .style.transform = 'translate(0, -100%)';\n  });\n\ndocument.querySelector('.main__callback-button')\n  .addEventListener('click', () => {\n    document.querySelector('.callback-popup')\n      .style.transform = 'translate(0, 0)';\n  });\n\ndocument.querySelector('.callback-popup__submit')\n  .addEventListener('click', event => {\n    event.preventDefault();\n\n    document.querySelector('.callback-popup')\n      .style.transform = 'translate(0, -100%)';\n  });\n\ndocument.querySelector('#telephone')\n  .addEventListener('input', event => {\n    const inputField = event.target;\n\n    if (inputField.value.match(/\\d/g)) {\n      inputField.placeholder = inputField.placeholder\n        .replace(/-/, inputField.value.match(/\\d/g));\n    }\n\n    inputField.value = '';\n  });\n\ndocument.querySelector('#telephone')\n  .addEventListener('keydown', event => {\n    if (event.key === 'Backspace') {\n      const inputField = event.target;\n\n      inputField.placeholder = inputField.placeholder\n        .replace(/\\d(?=[^\\d]*$)/, '-');\n    }\n  });\n\nfunction emailValidator(event) {\n  const regExp = /[0-9a-z_A-Z]+@[0-9a-z_A-Z^.]+\\.[a-zA-Z]{2,4}/i;\n  const emailInput = event.target;\n\n  if (!regExp.test(String(emailInput.value))) {\n    emailInput.style.backgroundColor = '#ffc3c3';\n    emailInput.setAttribute('data-valid', '0');\n  } else {\n    emailInput.style.backgroundColor = '#c3ffc3';\n    emailInput.setAttribute('data-valid', '1');\n  }\n}\n\nfunction passwordValidator(event) {\n  const regExp = /[\\w\\d]{4,}/i;\n  const passwordInput = event.target;\n\n  if (!regExp.test(String(passwordInput.value))) {\n    passwordInput.style.backgroundColor = '#ffc3c3';\n    passwordInput.setAttribute('data-valid', '0');\n  } else {\n    passwordInput.style.backgroundColor = '#c3ffc3';\n    passwordInput.setAttribute('data-valid', '1');\n  }\n}\n\ndocument.querySelector('#submition-input')\n  .addEventListener('input', emailValidator);\n\ndocument.querySelector('#mail')\n  .addEventListener('input', emailValidator);\n\ndocument.querySelector('#password')\n  .addEventListener('input', passwordValidator);\n\nfunction priceValidatior() {\n  const priceInputs = document.querySelectorAll('.form__price-input');\n\n  priceInputs.forEach(input => {\n    input.addEventListener('input', (event) => {\n      if (+event.target.value < 0 || isNaN(event.target.value)) {\n        event.target.style.backgroundColor = '#ffbaba';\n      } else {\n        event.target.style.backgroundColor = '#baffba';\n      }\n    });\n  });\n}\n\nconst resetFormButtons = document.querySelectorAll('.form__reset');\n\nresetFormButtons.forEach(button => {\n  button.addEventListener('click', () => {\n    document.querySelector('.goods-filter__category')\n      .innerHTML = categoryFormsHtml;\n  });\n});\n\nfunction addToComparison() {\n  const compareLinks = document.querySelectorAll('.card__tocompare-link');\n\n  compareLinks.forEach(link => {\n    link.addEventListener('click', (event) => {\n      const counterLabel = document.querySelector('#comparison');\n\n      if (event.target.textContent === 'Сравнить товар') {\n        event.target.textContent = 'В сравнении';\n        counterLabel.textContent = +counterLabel.textContent + 1;\n      } else {\n        event.target.textContent = 'Сравнить товар';\n        counterLabel.textContent = +counterLabel.textContent - 1;\n      }\n\n      if (+counterLabel.textContent > 0) {\n        counterLabel.style.display = 'block';\n      } else {\n        counterLabel.style.display = 'none';\n      }\n\n      cardsContainerHtml = document.querySelector('#cards-container').innerHTML;\n    });\n  });\n}\n\nfunction addToFavourite() {\n  const favouriteLinks = document.querySelectorAll('.card__tofavourite-link');\n\n  favouriteLinks.forEach(link => {\n    link.addEventListener('click', (event) => {\n      const favouriteLabel = document.querySelector('#favourites');\n\n      if (event.target.textContent === 'В избранное') {\n        event.target.textContent = 'В избранном';\n        favouriteLabel.textContent = +favouriteLabel.textContent + 1;\n      } else {\n        event.target.textContent = 'В избранное';\n        favouriteLabel.textContent = +favouriteLabel.textContent - 1;\n      }\n\n      if (+favouriteLabel.textContent > 0) {\n        favouriteLabel.style.display = 'block';\n      } else {\n        favouriteLabel.style.display = 'none';\n      }\n\n      cardsContainerHtml = document.querySelector('#cards-container').innerHTML;\n    });\n  });\n}\n\nconst cardsContainer = document.querySelector('#cards-container');\n\ndocument.querySelector('.goods-filter__search-container')\n  .addEventListener('click', event => {\n    if (event.target.className === 'goods-filter__search-button') {\n      event.preventDefault();\n\n      const inputField = document.querySelector('#search-bar');\n\n      if (inputField.value.trim().length < 2) {\n        cardsContainer.innerHTML = cardsContainerHtml;\n        inputField.value = 'Введите минимум два символа!';\n\n        cardsContainer.innerHTML = cardsContainerHtml\n          .replace(/<mark>|<\\/mark>/g, '');\n\n        addToComparison();\n        addToFavourite();\n\n        setTimeout(() => {\n          inputField.value = '';\n        }, 3000);\n\n        return;\n      }\n\n      const regExp = new RegExp(inputField.value, 'gi');\n      const allMatches = [...cardsContainerHtml.matchAll(regExp)];\n\n      if (allMatches.length === 0) {\n        inputField.value = 'Ничего не найдено';\n\n        setTimeout(() => {\n          inputField.value = '';\n        }, 2000);\n\n        return;\n      }\n\n      const sortedWords = [];\n\n      allMatches.forEach(foundedMatch => {\n        if (!sortedWords.includes(foundedMatch[0])) {\n          sortedWords.push(foundedMatch[0]);\n        }\n      });\n\n      sortedWords.forEach(word => {\n        const wordRegExp = new RegExp(word, 'g');\n\n        cardsContainer.innerHTML = cardsContainerHtml\n          .replace(wordRegExp, `<mark>${word}</mark>`);\n      });\n\n      addToComparison();\n      addToFavourite();\n    }\n  });\n\ndocument.querySelector('.enter-popup__submit')\n  .addEventListener('click', event => {\n    if (!(+document.querySelector('#password').getAttribute('data-valid')\n      && +document.querySelector('#mail').getAttribute('data-valid')\n    )) {\n      event.preventDefault();\n    }\n  });\n\ndocument.querySelector('.footer__form-submit')\n  .addEventListener('click', event => {\n    const subscriptionPopup = document\n      .querySelector('.footer__subscription-popup');\n\n    if (!+document.querySelector('#submition-input')\n      .getAttribute('data-valid')) {\n      event.preventDefault();\n    } else {\n      event.preventDefault();\n\n      subscriptionPopup.style.left = '10px';\n      subscriptionPopup.style.opacity = '1';\n\n      setTimeout(() => {\n        subscriptionPopup.style.left = '-100%';\n        subscriptionPopup.style.opacity = '0';\n      }, 3000);\n    }\n  });\n"]}